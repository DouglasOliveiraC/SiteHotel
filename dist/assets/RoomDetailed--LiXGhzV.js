import{d as E,f as j,g as c,h as p,i as R,c as n,a as e,j as h,F as P,k as z,t as g,e as y,l as D,o as i,m as M,_ as S}from"./index-DMUXXe_H.js";const O={class:"room-detailed"},q={class:"main-content"},B={class:"image-column"},J=["src"],Q={key:0,class:"thumbnails"},$=["src","onClick"],L={class:"info-column"},V={class:"price"},F=["innerHTML"],N=["src"],T=E({__name:"RoomDetailed",setup(U){const _=j();M();const I=_.params.id,s=c({id:"",room_number:"",type:"",price:0,thumbnail:""});async function k(){const a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml0em9nbWV6eXZkdHVobml0aWJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUyMjg3OTQsImV4cCI6MjA1MDgwNDc5NH0.MqkUrtqFcs6oc0Cl0SDlZsYiS9kYz8R-vgwbL2xtO28",o=localStorage.getItem("supabase_session"),r=o?JSON.parse(o).access_token:null;if(!r){console.error("Erro de autenticação");return}try{const t=await fetch(`https://itzogmezyvdtuhnitibj.supabase.co/rest/v1/rooms?id=eq.${I}`,{method:"GET",headers:{apikey:a,Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Erro ao buscar detalhes do quarto: ${t.status} ${t.statusText}`);const l=await t.json();l&&l.length>0&&(s.value=l[0])}catch(t){console.error("[DEBUG] Erro ao buscar detalhes do quarto:",t)}}const u=p(()=>s.value.type?`/images/RoomImages/${s.value.type.toLowerCase()}.jpg`:"/images/RoomImages/default.jpg"),v=p(()=>["/images/RoomImages/extra_1.jpg","/images/RoomImages/extra_2.jpg","/images/RoomImages/extra_3.jpg"]),x=p(()=>{if(!s.value.type)return"";const a=s.value.type.toLowerCase();return a==="premium"?`
      <strong>Experimente o máximo de luxo no Quarto Premium.</strong><br><br>
      Desfrute de uma banheira de hidromassagem privativa, sauna exclusiva e uma vista panorâmica estonteante.
      Cada detalhe, da cama king-size aos acabamentos sofisticados, foi projetado para uma experiência única.
      <br><br>
      Reserve agora e sinta a exclusividade e o conforto inigualável!
    `:a==="luxo"?`
      <strong>Descubra a sofisticação do Quarto Luxo.</strong><br><br>
      Com uma cama king-size ultra confortável, minibar premium, e serviço de quarto 24h,
      este ambiente foi criado para proporcionar uma estadia relaxante e elegante.
      <br><br>
      Viva uma experiência de alto padrão e surpreenda-se com cada detalhe!
    `:a==="standard"?`
      <strong>O Quarto Standard oferece conforto e funcionalidade.</strong><br><br>
      Equipado com cama queen-size, ambiente climatizado e serviços essenciais,
      ele é ideal para uma estadia prática e agradável.
      <br><br>
      Garanta sua reserva e desfrute de um ambiente acolhedor e eficiente!
    `:""}),w=c(""),m=c(!1),d=c("");function f(a){d.value=a,m.value=!0}function b(){m.value=!1,d.value=""}function C(a){return new Promise((o,r)=>{if(document.getElementById("paypal-sdk")){o();return}const t=document.createElement("script");t.id="paypal-sdk",t.src=`https://www.paypal.com/sdk/js?client-id=${a}&currency=BRL`,t.onload=()=>o(),t.onerror=()=>r(new Error("Falha ao carregar o script do PayPal")),document.head.appendChild(t)})}return R(async()=>{await k(),w.value=u.value;try{await C("AXonErsB3fCdIgwDlig2UqnkcGGjUfHg83hO_iC77Umx2j7uoBH0COts1fDIg7oJVv_Wbt2daqicCQp2"),window.paypal&&window.paypal.Buttons({createOrder:(a,o)=>o.order.create({purchase_units:[{amount:{value:s.value.price.toFixed(2)}}]}),onApprove:(a,o)=>o.order.capture().then(r=>{alert("Pagamento realizado com sucesso, "+r.payer.name.given_name+"!")}),onError:a=>{console.error("Erro no pagamento:",a),alert("Ocorreu um erro no pagamento. Por favor, tente novamente.")}}).render("#paypal-button-container")}catch(a){console.error("Erro ao carregar o PayPal SDK:",a)}}),(a,o)=>(i(),n("div",O,[e("div",q,[e("div",B,[e("img",{src:u.value,alt:"Imagem do Quarto",class:"main-image",onClick:o[0]||(o[0]=r=>f(u.value))},null,8,J),v.value.length?(i(),n("div",Q,[(i(!0),n(P,null,z(v.value,(r,t)=>(i(),n("img",{key:t,src:r,alt:"Miniatura do Quarto",class:"thumbnail",onClick:l=>f(r)},null,8,$))),128))])):h("",!0)]),e("div",L,[e("h1",null,"Quarto "+g(s.value.room_number)+" - "+g(s.value.type),1),e("p",V,"Preço: R$ "+g(s.value.price.toFixed(2)),1),e("p",{class:"detailed-summary",innerHTML:x.value},null,8,F),o[1]||(o[1]=e("div",{id:"paypal-button-container"},null,-1)),o[2]||(o[2]=e("div",{class:"sandbox-info"},[e("p",null,"Este é um ambiente de testes do PayPal. Para testar o pagamento, use as credenciais abaixo:"),e("ul",null,[e("li",null,[e("strong",null,"Email:"),y(" sb-2yfc738082087@personal.example.com")]),e("li",null,[e("strong",null,"Senha:"),y(' "k0J%mOQ ')])]),e("p",null,"Não há necessidade de cartões reais. Este é um ambiente de simulação.")],-1))])]),m.value?(i(),n("div",{key:0,class:"modal",onClick:D(b,["self"])},[e("img",{src:d.value,alt:"Imagem Ampliada",class:"modal-image"},null,8,N),e("button",{class:"close-modal",onClick:b},"X")])):h("",!0)]))}}),H=S(T,[["__scopeId","data-v-931136b9"]]);export{H as default};
